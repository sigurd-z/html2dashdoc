<html><head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>在Windows 8 Metro平台搭建Cocos2d-x Android开发环境_Cocos帮助文档_Cocos引擎_游戏开发引擎_Cocos引擎官网</title>
<meta content="IE=8" http-equiv="X-UA-Compatible">
<meta content="Cocos帮助文档,Cocos2d-x文档,Cocos2d-JS文档,Cocos Code IDE文档,Quick-Cocos2d-x文档,Cocos API,Cocos,Cocos引擎,Cocos介绍,Cocos文档,Cocos特点,Cocos引擎下载,Cocos官网,游戏引擎,游戏引擎下载,游戏开发引擎,html5游戏开发,Android游戏开发,ios游戏开发,游戏开发方案,游戏开发工具" name="keywords"/>
<meta content="Cocos提供了全套的引擎和开发工具,涵盖从前期设计,资源制作,开发调试,打包上线全套的解决方案,Cocos重点优化了工作流,规范了整个游戏开发流程,降低沟通成本,提高开发效率" name="description"/>
<link href="src/2ef9a86fb35d52ac11578452ccf1485f.css" rel="stylesheet" type="text/css"/>
<link href="src/88a5440cf79e2c8f05f9f10ce6aba841.css" rel="stylesheet" type="text/css"/>
<link href="src/aade560970aa998972e368caf1c78181.css" rel="stylesheet" type="text/css"/>
<script src="src/07bd722c9fad66b606a50c3acc1af50f.js" type="text/javascript"></script>
<script src="src/de92148ebc93b342e9b5b8f21d7fe69c.js" type="text/javascript"></script>
<script src="https://passport.cocos.com/sso/get_sso_header?client_id=161" type="text/javascript"></script>
<script src="src/bd48e73433c4825b90f3554d64a5ae4f.js" type="text/javascript"></script>
</meta></head><body style="padding:0 25px;"><div class="itemdoc">
<h1>在Windows 8 Metro平台搭建Cocos2d-x Android开发环境</h1>
<ul>
<li>
<p>1.下载Android SDK：一般情况下用户只下载SDK，不过这里推荐下载集合Android SDK、Eclipse及Android Plugin for Eclipse（Android插件）的ADT Bundle工具。最新版下载地址为
<a href="http://developer.android.com/sdk/index.html"><a href="http://developer.android.com/sdk/index.html" target="_blank">http://developer.android.com/sdk/index.html</a></a>
下载后解压ADT，本机解压路径为“E:\ Drive”。本机ADT路径为“E:\adt-bundle-windows-x86_64-20130717”。本机SDK路径为“E:\adt-bundle-windows-x86_64-20130717\sdk”。此外记得更新SDK。选择最新版的API以及Android 2.2（API 8）。</p>
</li>
<li>
<p>2.从<a href="http://developer.android.com/tools/sdk/ndk/index.html"><a href="http://developer.android.com/tools/sdk/ndk/index.html" target="_blank">http://developer.android.com/tools/sdk/ndk/index.html</a></a>下载NDK。本机使用64位Windows 8系统。所以本机下载的NDK版本为“android-ndk-r9-windows-x86_64.zip”。将下载的NDK压缩文件解压至“C:\ Drive”。本机解压路径为“E:\android-ndk-r9”。</p>
</li>
<li>
<p>3.从<a href="http://www.cygwin.com/install.html"><a href="http://www.cygwin.com/install.html" target="_blank">http://www.cygwin.com/install.html</a></a>下载安装Cygwin。Cygwin程序可以让你在Windows平台体验Linux效果。你可以在Cygwin中安装某些资源包，从而打造一个小型的类Linux环境。安装Cygwin之后，当出现选择资源包选项时，请搜索以下资源包并安装：autoconf、automake、binutils、gcc-core、gcc-g++、gcc4-core、gcc4-g++、gdb、pcre、pcre-devel、gawk以及 make。         <br/>
注意：选择GUI版本的“make”资源包，否则将无法使用NDK编译项目。</p>
</li>
<li>
<p>4.从<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html"><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html" target="_blank">http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html</a></a>下载JDK。不管你的系统是32位还是64位，你都只需要下载32位版本的JDK。将Java安装至“C:\Java”中。</p>
</li>
<li>
<p>5.下载最新版本的Cocos2d-x引擎并解压至“C:\ Drive”。本机解压路径为“E:\cocos2d-x-2.2”。</p>
</li>
<li>
<p>6.设置Java、Cocos2d-x、SDK及NDK环境变量。        <br/>
本机环境变量如下所示：</p>
<pre><code>COCOS2DX_ROOTE:\cocos2d-x-2.2
ANDROID_SDK_ROOTE:\adt-bundle-windows-x86_64-20130717\sdk
NDK_ROOTE:\android-ndk-r9
JAVA_HOMEC:\Java_32_Bit\jdk1.7.0_40\</code></pre>
<p>如果不确定如何设置环境变量，请参考快速指南<a href="http://www.computerhope.com/issues/ch000549.htm"><a href="http://www.computerhope.com/issues/ch000549.htm" target="_blank">http://www.computerhope.com/issues/ch000549.htm</a></a>。</p>
</li>
<li>
<p>7.打开Cygwin，右键单击图标，选择“Run as administrator”（以管理员身份运行）。</p>
</li>
<li>
<p>8.现在开始新建Cocos2d-x项目。先介绍如何新建各平台通用的项目，之后再只选择Android平台作介绍。执行以下命令：cd $COCOS2DX_ROOTcd tools/project-creator     <br/>
再输入以下命令创建新项目：     <br/>
<code>python ./create_project.py -project TestGame -package com.MyCompany.TestGame -language cpp</code> <br/>
这时会在项目目录下创建新项目。本机目录为“E:\cocos2d-x-2.2\projects”。    <br/>
运行“create_project.py”脚本时，如果遇到如下错误：          </p>
<pre><code>E:\cocos2d-x-2.2\tools\project-creator&gt;create_project.py -project MyGame -package com.webfolks.AwesomeGame -language cppFile 
"E:\cocos2d-x-2.2\tools\project-creator\create_project.py", line 63
print "Invalid -project parameter" ^SyntaxError: invalid syntax</code></pre>
<p>请按照以下步骤修复该问题：        <br/>
将“create-project.py”文件中的所有打印语句（print statements）放到圆括号中。        <br/>
原始语句如下：       <br/>
<code>print "Usage: create_project.py-project PROJECT_NAME-package PACKAGE_NAME-language PROGRAMING_LANGUAGE"</code> <br/>
修改后语句如下：   <br/>
<code>print ("Usage: create_project.py-project PROJECT_NAME-package PACKAGE_NAME-language PROGRAMING_LANGUAGE")</code> </p>
</li>
<li>
<p>9.设置权限（Permissions）：新建项目有个问题，即这个项目是由Windows平台别的用户创建的，而我们实际登陆之后是没有权限复制或修改的。以便能够复制修改，请单击右键已创建的项目文件夹“TestGame”，选择“Security Tab”然后点击“Advanced”再选择第一个选项“Allow, Every, Full Control, This folder subfolders and files”。    <br/>
然后勾上“Replace all child object permission entries with inheritable permission entries from this object”选项。至此所有子文件夹的访问权限已经修改完成。</p>
</li>
<li>
<p>10.创建完项目之后，为了将该项目导入Android之中，还要用NDK编译生成的项目。打开Cygwin进入创建的“TestGame”文件夹。         <br/>
进入“proj.android”文件夹。在该目录下输入以下命令运行“build_native.sh”脚本。./ build_native.sh      <br/>
这时完成编译需要一段时间。     <br/>
大部分情况下可能会遇到如下错误：    <br/>
<code>cygwin warning:MS-DOS style path detected: E:\android-ndk-r9/ndk-buildPreferred POSIX equivalent is: /cygdrive/e/android-ndk-r9/ndk-build</code> <br/>
要解决这个问题，其中一个方法是通过修改环境变量，将“NDK_ROOT”的值从“E:\android-ndk-r9”改成“/cygdrive/e/android-ndk-r9/ndk-build”。修改变量之后，需要重启cygwin再运行“build_native.sh”脚本。    <br/>
我更喜欢另外一种方法：编辑“build_natiive.sh”文件然后临时设置“NDK_ROOK”变量。     <br/>
在Windows平台，进入创建的“proj.android”项目文件夹，然后进入“proj.android”，这时你会看到一个“build_native.sh”文件。用文本编辑器打开这个文件，然后在第二行中增加以下代码：
<code>set $NDK_ROOT = "/cygdrive/e/android-ndk-r9/ndk-build";</code> <br/>
使用这种方法的好处是不用重启cygwin。</p>
</li>
<li>
<p>11.在cygwin中进入新建的项目文件夹，然后进入“proj.android”文件夹。运行命令“./ build_native.sh”。编译项目需要一段时间。</p>
</li>
<li>
<p>12.编译完成后，复制整个项目至任意其他位置，本机为“Desktop\Cocos_Games”。打开Eclipse（记住，你已经下载集合SDK及Eclipse的ADT工具），导入新项目。依次单击“File &gt; Import &gt; Existing Android Code Into Workspace &gt; Next”         <br/>
在“Root Directory”（根目录）中点击“Browse”然后找到“proj.android”然后点击“OK”。   <br/>
注意：不要选择“Import to Workspace”选项 </p>
</li>
<li>13.在导入项目时你会看到一些错误说某个cocos2d导入语句无法导入。可按照以下步骤操作解决该问题：      </li>
</ul>
<blockquote>
<ol>
<li>在Eclipse中右键单击项目，然后选择最后一个选项“properties”（属性）。 </li>
<li>在“Project Properties”（项目属性）窗口，在左边面板选择“Java Build Path”（Java编译路径）。</li>
<li>在“Java Build Path”（Java编译路径）下选择“source”项。默认此项是已经被选择的。</li>
<li>点击“Link Source”按钮。</li>
<li>浏览找到“location-&gt; COCOS2D-X_INSTALLATION_FOLDER/cocos2dx/platform/android/java/src. My path will be: E:\cocos2d-x-2.2\cocos2dx\platform\android\java\src”</li>
<li>随便给个文件夹名称。例如，将移除“src”用“Cocos2d-x-source”替换。点击“Finish”完成。</li>
</ol>
</blockquote>
<p>到此编译结束。你可以在Android设备中运行项目，应该会显示Cocos2d-x LOGO。请注意：项目在Android虚拟机上可能有时候无法运行。</p>
<p>参考信息：<a href="http://www.cocos2d-x.org/forums/6/topics/37122"><a href="http://www.cocos2d-x.org/forums/6/topics/37122" target="_blank">http://www.cocos2d-x.org/forums/6/topics/37122</a></a>。</p>
</div></body></html>