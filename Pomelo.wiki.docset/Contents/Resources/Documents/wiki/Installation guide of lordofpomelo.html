<html><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
<meta charset="utf-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="en" http-equiv="Content-Language">
<meta content="width=1020" name="viewport">
<title>Installation guide of lordofpomelo · NetEase/pomelo Wiki · GitHub</title>
<link href="/opensearch.xml" rel="search" title="GitHub" type="application/opensearchdescription+xml">
<link href="src/ad667adaa2cfe8f3caa4a41b7d0a79a1.png" rel="fluid-icon" title="GitHub">
<link href="src/a10d19ff5f738940a7a5086be334f50b.png" rel="apple-touch-icon" sizes="57x57">
<link href="src/a10d19ff5f738940a7a5086be334f50b.png" rel="apple-touch-icon" sizes="114x114">
<link href="src/b4cd268bc600cc14d2cdd557de6da2fb.png" rel="apple-touch-icon" sizes="72x72">
<link href="src/b4cd268bc600cc14d2cdd557de6da2fb.png" rel="apple-touch-icon" sizes="144x144">
<meta content="1401488693436528" property="fb:app_id">
<meta content="@github" name="twitter:site"/><meta content="summary" name="twitter:card"/><meta content="NetEase/pomelo" name="twitter:title"/><meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." name="twitter:description"/><meta content="https://avatars0.githubusercontent.com/u/1460597?v=3&amp;s=400" name="twitter:image:src"/>
<meta content="GitHub" property="og:site_name"/><meta content="object" property="og:type"/><meta content="https://avatars0.githubusercontent.com/u/1460597?v=3&amp;s=400" property="og:image"/><meta content="NetEase/pomelo" property="og:title"/><meta content="https://github.com/NetEase/pomelo" property="og:url"/><meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." property="og:description"/>
<meta content="https://api.github.com/_private/browser/stats" name="browser-stats-url">
<meta content="https://api.github.com/_private/browser/errors" name="browser-errors-url">
<link href="https://assets-cdn.github.com/" rel="assets">
<meta content="1000" name="pjax-timeout">
<meta content="/windows-tile.png" name="msapplication-TileImage">
<meta content="#ffffff" name="msapplication-TileColor">
<meta data-pjax-transient="" name="selected-link" value="repo_wiki">
<meta content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU" name="google-site-verification">
<meta content="UA-3769691-2" name="google-analytics">
<meta content="collector.githubapp.com" name="octolytics-host"/><meta content="github" name="octolytics-app-id"/><meta content="CA86616A:2F43:126BDC83:5670C020" name="octolytics-dimension-request_id"/>
<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/wiki/show" data-pjax-transient="true" name="analytics-location"/>
<meta content="Rails, view, wiki#show" data-pjax-transient="true" name="analytics-event"/>
<meta class="js-ga-set" content="Logged Out" name="dimension1">
<meta content="github.com" name="hostname">
<meta content="" name="user-login">
<meta content="github.com" name="expected-hostname">
<link color="#4078c0" href="https://assets-cdn.github.com/pinned-octocat.svg" rel="mask-icon">
<link href="https://assets-cdn.github.com/favicon.ico" rel="icon" type="image/x-icon">
<meta content="49d2108de3b7c48b0a0ce1e3d5700e6f09d540e8" name="form-nonce"/>
<link crossorigin="anonymous" href="src/350888e1495e7af27e01faa9d8291dee.css" media="all" rel="stylesheet"/>
<link crossorigin="anonymous" href="src/9fae9b7d8f0785d745a43c6465f74ae5.css" media="all" rel="stylesheet"/>
<meta content="cd9958d45e48e8e3157a320e9c346eaa" http-equiv="x-pjax-version">
<meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." name="description">
<meta content="github.com/NetEase/pomelo git https://github.com/NetEase/pomelo.git" name="go-import">
<meta content="1460597" name="octolytics-dimension-user_id"/><meta content="NetEase" name="octolytics-dimension-user_login"/><meta content="5880912" name="octolytics-dimension-repository_id"/><meta content="NetEase/pomelo" name="octolytics-dimension-repository_nwo"/><meta content="true" name="octolytics-dimension-repository_public"/><meta content="false" name="octolytics-dimension-repository_is_fork"/><meta content="5880912" name="octolytics-dimension-repository_network_root_id"/><meta content="NetEase/pomelo" name="octolytics-dimension-repository_network_root_nwo"/>
<link href="https://github.com/NetEase/pomelo/commits/master.atom" rel="alternate" title="Recent Commits to pomelo:master" type="application/atom+xml">
</link></meta></meta></meta></link></link></meta></meta></meta></meta></meta></meta></meta></meta></meta></meta></link></meta></meta></meta></link></link></link></link></link></link></meta></meta></meta></meta></head><body style="padding:0 25px;"><div class="gollum-markdown-content instapaper_body" id="wiki-body">
<div class="markdown-body">
<p>Lordofpomelo is a massively multiplayer online role-playing game based on pomelo framework and composed of 
character, equipment, skill, upgrade, task system etc.</p>
<p>It is completed in less than two months and has about 6000 lines codes in server and client side respectively.
Base on pomelo framework on server side and colorbox framework on client side, lordofpomelo supports about 1000 
players concurrent access in one scene and shorten the response time to 200 millisecond.</p>
<h2>
<a aria-hidden="true" class="anchor" href="#runing-environment" id="user-content-runing-environment"><span class="octicon octicon-link"></span></a>Runing environment</h2>
<ul>
<li><a href="http://nodejs.org/">nodejs</a></li>
<li>Linux or Mac os</li>
<li>mysql</li>
</ul>
<h2>
<a aria-hidden="true" class="anchor" href="#installation" id="user-content-installation"><span class="octicon octicon-link"></span></a>Installation</h2>
<h3>
<a aria-hidden="true" class="anchor" href="#download-source" id="user-content-download-source"><span class="octicon octicon-link"></span></a>Download source</h3>
<p><code>git clone https://github.com/NetEase/lordofpomelo.git</code></p>
<h3>
<a aria-hidden="true" class="anchor" href="#install-dependencies" id="user-content-install-dependencies"><span class="octicon octicon-link"></span></a>Install dependencies</h3>
<p><code>cd lordofpomelo &amp;&amp; sh npm-install.sh</code></p>
<h3>
<a aria-hidden="true" class="anchor" href="#install-components" id="user-content-install-components"><span class="octicon octicon-link"></span></a>Install components</h3>
<p><code>npm install -g component</code><br>
<code>cd lordofpomelo/web-server &amp;&amp; sh bin/component.sh</code> </br></p>
<h2>
<a aria-hidden="true" class="anchor" href="#create-database" id="user-content-create-database"><span class="octicon octicon-link"></span></a>Create database</h2>
<p>Create database with file './game-server/config/schema/Pomelo.sql'.</p>
<ul>
<li>Install mysql database</li>
<li>Login database: <code>mysql -uUsername -pPassword</code>
</li>
<li>Create database: <code>mysql&gt; create database Pomelo</code>
</li>
<li>Choose database: <code>mysql&gt; use Pomelo</code>
</li>
<li>Import sql file: <code>mysql&gt; source ./game-server/config/schema/Pomelo.sql</code>
</li>
</ul>
<h3>
<a aria-hidden="true" class="anchor" href="#modify-database-configuration" id="user-content-modify-database-configuration"><span class="octicon octicon-link"></span></a>Modify database configuration</h3>
<p>The database configuration file is ‘/lordofpomelo/shared/config/mysql.json', and you can modify corresponding parameters according to your own configuration.</p>
<div class="highlight highlight-source-json"><pre>
    {
      <span class="pl-s"><span class="pl-pds">"</span>development<span class="pl-pds">"</span></span>: 
      {
         <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>3306<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>database<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Pomelo<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>root<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>123456<span class="pl-pds">"</span></span>
      },
      <span class="pl-s"><span class="pl-pds">"</span>production<span class="pl-pds">"</span></span>:
      {
         <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>3306<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>database<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>Pomelo<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>root<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>123456<span class="pl-pds">"</span></span>
      }
    }</pre></div>
<h3>
<a aria-hidden="true" class="anchor" href="#run-game" id="user-content-run-game"><span class="octicon octicon-link"></span></a>Run game</h3>
<p>Both game-server and web-server should be started, and game-server can be started by  the following command </p>
<p><code>pomelo start [development | production] [--daemon]</code> </p>
<p>while web-server is started like this:
 <code>cd web-server &amp;&amp; node app</code></p>
<p>At last, please visit website of 'http://localhost:3001' or '<a href="http://127.0.0.1:3001">http://127.0.0.1:3001</a>' by browser with
websocket support. By the way, chrome is recommended.</p>
<h2>
<a aria-hidden="true" class="anchor" href="#solution-for-some-problems" id="user-content-solution-for-some-problems"><span class="octicon octicon-link"></span></a>Solution for some problems</h2>
<ul>
<li>port conflicts</li>
</ul>
<p>Modify configuration in './game-server/config/server.json':</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>development<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>connector<span class="pl-pds">"</span></span>: [
    {<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>connector-server-1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: <span class="pl-c1">3150</span>, <span class="pl-s"><span class="pl-pds">"</span>clientPort<span class="pl-pds">"</span></span>: <span class="pl-c1">3010</span>, <span class="pl-s"><span class="pl-pds">"</span>frontend<span class="pl-pds">"</span></span>: <span class="pl-c1">true</span>},
    {<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>connector-server-2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: <span class="pl-c1">3151</span>, <span class="pl-s"><span class="pl-pds">"</span>clientPort<span class="pl-pds">"</span></span>:<span class="pl-c1">3011</span>, <span class="pl-s"><span class="pl-pds">"</span>frontend<span class="pl-pds">"</span></span>: <span class="pl-c1">true</span>}
    ],
  <span class="pl-s"><span class="pl-pds">"</span>area<span class="pl-pds">"</span></span>: [
    {<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>area-server-1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: <span class="pl-c1">3250</span>, <span class="pl-s"><span class="pl-pds">"</span>area<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>},
    {<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>area-server-2<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: <span class="pl-c1">3251</span>, <span class="pl-s"><span class="pl-pds">"</span>area<span class="pl-pds">"</span></span>: <span class="pl-c1">2</span>},
    {<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>area-server-3<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: <span class="pl-c1">3252</span>, <span class="pl-s"><span class="pl-pds">"</span>area<span class="pl-pds">"</span></span>: <span class="pl-c1">3</span>}
  ],
  <span class="pl-s"><span class="pl-pds">"</span>chat<span class="pl-pds">"</span></span>: [{<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>chat-server-1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>:<span class="pl-c1">3450</span>}],
  <span class="pl-s"><span class="pl-pds">"</span>path<span class="pl-pds">"</span></span>: [{<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>path-server-1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: <span class="pl-c1">3550</span>}],
  <span class="pl-s"><span class="pl-pds">"</span>auth<span class="pl-pds">"</span></span>: [{<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>auth-server-1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span>: <span class="pl-c1">3650</span>}],
  <span class="pl-s"><span class="pl-pds">"</span>gate<span class="pl-pds">"</span></span>: [{<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>gate-server-1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>clientPort<span class="pl-pds">"</span></span>: <span class="pl-c1">3014</span>, <span class="pl-s"><span class="pl-pds">"</span>frontend<span class="pl-pds">"</span></span>: <span class="pl-c1">true</span>}]
 },
  <span class="pl-s"><span class="pl-pds">"</span>production<span class="pl-pds">"</span></span>: { }
}</pre></div>
<p>This file regulates the servers configuration information, such as serverType, serverId, host, port etc. The configuration information in production is similar with development, and the frontend is the flag for frontend server. </p>
<p>Also you can modify configuration of '/web-server/public/js/config/config.js':</p>
<div class="highlight highlight-source-json"><pre>IMAGE_URL: <span class="pl-s"><span class="pl-pds">"</span>http://pomelo.netease.com/art/<span class="pl-pds">"</span></span>,
GATE_HOST: window.location.hostname,
GATE_PORT: <span class="pl-c1">3014</span></pre></div>
<p>This is the most common configuration for web server. You can get static resources like images by IMAGE_URL.
GATE_HOST is the access of websocket request which gets the connectorId from gate server and connects to connector
server. GATE_PORT is the port of gate server.</p>
<h2>
<a aria-hidden="true" class="anchor" href="#details-for-configurations" id="user-content-details-for-configurations"><span class="octicon octicon-link"></span></a>Details for configurations</h2>
<ul>
<li>./game-server/config/master.json</li>
</ul>
<p>This file is about master server configuration, including serverId, host etc both in development and production.
The master server is responsible for starting and closing other servers, and also in charge of monitoring state information of them.</p>
<ul>
<li>./game-server/config/servers.json</li>
</ul>
<p>The configuration information for area, connector and status server in all environments. The connector server has websocket port parameter because it needs to communicate with clients through websocket.</p>
<ul>
<li>./shared/config/mysql.json</li>
</ul>
<p>The database configuration information. You should modify the configuration parameters after installing lordofpomelo 
in development environment. </p>
<ul>
<li>./web-server/public/js/config/config.js</li>
</ul>
<p>This is the most common configuration composed of IMAGE_URL, GATE_HOST and GATE_PORT for web server.</p>
<h2>
<a aria-hidden="true" class="anchor" href="#supplementary-for-login" id="user-content-supplementary-for-login"><span class="octicon octicon-link"></span></a>Supplementary for login</h2>
<p>Not only can you create a new account, but also use account of github, google, facebook, twitter and sina weibo after authorized
to access to lordofpomelo. Of course, you should get the authority and modify the configuration parameters locating in './web-server/config/oauth.json'.</p>
</div>
</div></body></html>