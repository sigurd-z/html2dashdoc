<html><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
<meta charset="utf-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="en" http-equiv="Content-Language">
<meta content="width=1020" name="viewport">
<title>Framework class diagram · NetEase/pomelo Wiki · GitHub</title>
<link href="/opensearch.xml" rel="search" title="GitHub" type="application/opensearchdescription+xml">
<link href="src/ad667adaa2cfe8f3caa4a41b7d0a79a1.png" rel="fluid-icon" title="GitHub">
<link href="src/a10d19ff5f738940a7a5086be334f50b.png" rel="apple-touch-icon" sizes="57x57">
<link href="src/a10d19ff5f738940a7a5086be334f50b.png" rel="apple-touch-icon" sizes="114x114">
<link href="src/b4cd268bc600cc14d2cdd557de6da2fb.png" rel="apple-touch-icon" sizes="72x72">
<link href="src/b4cd268bc600cc14d2cdd557de6da2fb.png" rel="apple-touch-icon" sizes="144x144">
<meta content="1401488693436528" property="fb:app_id">
<meta content="@github" name="twitter:site"/><meta content="summary" name="twitter:card"/><meta content="NetEase/pomelo" name="twitter:title"/><meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." name="twitter:description"/><meta content="https://avatars0.githubusercontent.com/u/1460597?v=3&amp;s=400" name="twitter:image:src"/>
<meta content="GitHub" property="og:site_name"/><meta content="object" property="og:type"/><meta content="https://avatars0.githubusercontent.com/u/1460597?v=3&amp;s=400" property="og:image"/><meta content="NetEase/pomelo" property="og:title"/><meta content="https://github.com/NetEase/pomelo" property="og:url"/><meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." property="og:description"/>
<meta content="https://api.github.com/_private/browser/stats" name="browser-stats-url">
<meta content="https://api.github.com/_private/browser/errors" name="browser-errors-url">
<link href="https://assets-cdn.github.com/" rel="assets">
<meta content="1000" name="pjax-timeout">
<meta content="/windows-tile.png" name="msapplication-TileImage">
<meta content="#ffffff" name="msapplication-TileColor">
<meta data-pjax-transient="" name="selected-link" value="repo_wiki">
<meta content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU" name="google-site-verification">
<meta content="UA-3769691-2" name="google-analytics">
<meta content="collector.githubapp.com" name="octolytics-host"/><meta content="github" name="octolytics-app-id"/><meta content="CA86616A:448D:EAC52F3:5670C004" name="octolytics-dimension-request_id"/>
<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/wiki/show" data-pjax-transient="true" name="analytics-location"/>
<meta content="Rails, view, wiki#show" data-pjax-transient="true" name="analytics-event"/>
<meta class="js-ga-set" content="Logged Out" name="dimension1">
<meta content="github.com" name="hostname">
<meta content="" name="user-login">
<meta content="github.com" name="expected-hostname">
<link color="#4078c0" href="https://assets-cdn.github.com/pinned-octocat.svg" rel="mask-icon">
<link href="https://assets-cdn.github.com/favicon.ico" rel="icon" type="image/x-icon">
<meta content="c380f52286eb73241b61a80b21c226545cc53406" name="form-nonce"/>
<link crossorigin="anonymous" href="src/350888e1495e7af27e01faa9d8291dee.css" media="all" rel="stylesheet"/>
<link crossorigin="anonymous" href="src/9fae9b7d8f0785d745a43c6465f74ae5.css" media="all" rel="stylesheet"/>
<meta content="cd9958d45e48e8e3157a320e9c346eaa" http-equiv="x-pjax-version">
<meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." name="description">
<meta content="github.com/NetEase/pomelo git https://github.com/NetEase/pomelo.git" name="go-import">
<meta content="1460597" name="octolytics-dimension-user_id"/><meta content="NetEase" name="octolytics-dimension-user_login"/><meta content="5880912" name="octolytics-dimension-repository_id"/><meta content="NetEase/pomelo" name="octolytics-dimension-repository_nwo"/><meta content="true" name="octolytics-dimension-repository_public"/><meta content="false" name="octolytics-dimension-repository_is_fork"/><meta content="5880912" name="octolytics-dimension-repository_network_root_id"/><meta content="NetEase/pomelo" name="octolytics-dimension-repository_network_root_nwo"/>
<link href="https://github.com/NetEase/pomelo/commits/master.atom" rel="alternate" title="Recent Commits to pomelo:master" type="application/atom+xml">
</link></meta></meta></meta></link></link></meta></meta></meta></meta></meta></meta></meta></meta></meta></meta></link></meta></meta></meta></link></link></link></link></link></link></meta></meta></meta></meta></head><body style="padding:0 25px;"><div class="gollum-markdown-content instapaper_body" id="wiki-body">
<div class="markdown-body">
<p>In this section, a informal class diagram of the pomelo framework is presented.</p>
<p>There are some notices about the class diagram:</p>
<ul>
<li><p>Actually, since there is not a concept of class but simulative pseudo-class in javascript, so classes within the class diagram is not corresponding to the pseudo-classes defined within the pomelo framework strictly. For example, HandlerFilter, in our class diagram , it is an abstract class to be as the super for all HandlerFilter class, however there is not a corresponding definition in the pomelo framework. We often define just before method and after method for an object and then treat it as a HandlerFilter, without being concerned about their inheritance hierarchy.</p></li>
<li><p>In the class diagram, we name some classes with prefix "Co", in order to indicate that it is a component for pomelo framework.</p></li>
<li><p>In the class diagram, There is a RawSocket class, which is treated as an abstract socket for communication. In practical, it may be WebSocket, TCP or socket.io. All the classes related to RawSocket will participante network communication, including communication with clients or with other servers via RPC invocation.</p></li>
</ul>
<p>Here is the class diagram :</p>
<p><img alt="pomelo Framework class diagram" src="src/65ac9a48acf900fabe0cc328c77a3af6.png"/></p>
<p>The following is a brief analysis of the class diagram:</p>
<ul>
<li><p>The Core of the framework is two classes, <strong>Pomelo</strong> and <strong>Application</strong>, Application instance is created by Pomelo. Pomelo consists of a series of components and a global context "Application".</p></li>
<li><p>All the components that have a "Co"-prefixal name presented in the diagram are subclasses of abstract class <strong>Component</strong>. Each component will do its particular work, and be loaded by different servers. The components presented in the class diagram are all built-in component of pomelo framework, which provide core functionalities of pomelo. Developer can customize their own component to extend pomelo framework as well.</p></li>
<li><p>In order to demonstrate pomelo framework better, the classes presented is not only in pomelo framework, but also some classes that is related to the pomelo framework, such as some classes in the <a href="https://github.com/NetEase/pomelo-admin">pomelo-admin</a> and <a href="https://github.com/NetEase/pomelo-rpc">pomelo-rpc</a>.</p></li>
<li><p>It can be seen from the class diagram that there are many classes that are communication-related as they are related to <strong>RawSocket</strong>, such as MasterAgent &amp; MonitorAgent; MailBox &amp; Acceptor and Connector. In fact , MasterAgent &amp; MonitorAgent are used in server management framework, MasterAgent acts as "server", and MonitorAgent acts as "client". MasterAgent listens on its configured port, MonitorAgent will connects and communicates to MasterAgent, and transfer the commands and monitoring info between them to complete the job for server cluster management, and MailBox and Acceptor do the same work as MasterAgent and MonitorAgent do, but they work for RPC framework. Connector is used to accept connections from clients.</p></li>
</ul>
</div>
</div></body></html>