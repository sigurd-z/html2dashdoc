<html><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
<meta charset="utf-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="en" http-equiv="Content-Language">
<meta content="width=1020" name="viewport">
<title>Helloworld of pomelo · NetEase/pomelo Wiki · GitHub</title>
<link href="/opensearch.xml" rel="search" title="GitHub" type="application/opensearchdescription+xml">
<link href="src/ad667adaa2cfe8f3caa4a41b7d0a79a1.png" rel="fluid-icon" title="GitHub">
<link href="src/a10d19ff5f738940a7a5086be334f50b.png" rel="apple-touch-icon" sizes="57x57">
<link href="src/a10d19ff5f738940a7a5086be334f50b.png" rel="apple-touch-icon" sizes="114x114">
<link href="src/b4cd268bc600cc14d2cdd557de6da2fb.png" rel="apple-touch-icon" sizes="72x72">
<link href="src/b4cd268bc600cc14d2cdd557de6da2fb.png" rel="apple-touch-icon" sizes="144x144">
<meta content="1401488693436528" property="fb:app_id">
<meta content="@github" name="twitter:site"/><meta content="summary" name="twitter:card"/><meta content="NetEase/pomelo" name="twitter:title"/><meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." name="twitter:description"/><meta content="https://avatars0.githubusercontent.com/u/1460597?v=3&amp;s=400" name="twitter:image:src"/>
<meta content="GitHub" property="og:site_name"/><meta content="object" property="og:type"/><meta content="https://avatars0.githubusercontent.com/u/1460597?v=3&amp;s=400" property="og:image"/><meta content="NetEase/pomelo" property="og:title"/><meta content="https://github.com/NetEase/pomelo" property="og:url"/><meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." property="og:description"/>
<meta content="https://api.github.com/_private/browser/stats" name="browser-stats-url">
<meta content="https://api.github.com/_private/browser/errors" name="browser-errors-url">
<link href="https://assets-cdn.github.com/" rel="assets">
<meta content="1000" name="pjax-timeout">
<meta content="/windows-tile.png" name="msapplication-TileImage">
<meta content="#ffffff" name="msapplication-TileColor">
<meta data-pjax-transient="" name="selected-link" value="repo_wiki">
<meta content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU" name="google-site-verification">
<meta content="UA-3769691-2" name="google-analytics">
<meta content="collector.githubapp.com" name="octolytics-host"/><meta content="github" name="octolytics-app-id"/><meta content="CA86616A:2F44:14480FAB:5670C014" name="octolytics-dimension-request_id"/>
<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/wiki/show" data-pjax-transient="true" name="analytics-location"/>
<meta content="Rails, view, wiki#show" data-pjax-transient="true" name="analytics-event"/>
<meta class="js-ga-set" content="Logged Out" name="dimension1">
<meta content="github.com" name="hostname">
<meta content="" name="user-login">
<meta content="github.com" name="expected-hostname">
<link color="#4078c0" href="https://assets-cdn.github.com/pinned-octocat.svg" rel="mask-icon">
<link href="https://assets-cdn.github.com/favicon.ico" rel="icon" type="image/x-icon">
<meta content="deff09b2c8a61303dadc5fa2587d516eedf09cb8" name="form-nonce"/>
<link crossorigin="anonymous" href="src/350888e1495e7af27e01faa9d8291dee.css" media="all" rel="stylesheet"/>
<link crossorigin="anonymous" href="src/9fae9b7d8f0785d745a43c6465f74ae5.css" media="all" rel="stylesheet"/>
<meta content="cd9958d45e48e8e3157a320e9c346eaa" http-equiv="x-pjax-version">
<meta content="pomelo - A fast,scalable,distributed game server framework for Node.js." name="description">
<meta content="github.com/NetEase/pomelo git https://github.com/NetEase/pomelo.git" name="go-import">
<meta content="1460597" name="octolytics-dimension-user_id"/><meta content="NetEase" name="octolytics-dimension-user_login"/><meta content="5880912" name="octolytics-dimension-repository_id"/><meta content="NetEase/pomelo" name="octolytics-dimension-repository_nwo"/><meta content="true" name="octolytics-dimension-repository_public"/><meta content="false" name="octolytics-dimension-repository_is_fork"/><meta content="5880912" name="octolytics-dimension-repository_network_root_id"/><meta content="NetEase/pomelo" name="octolytics-dimension-repository_network_root_nwo"/>
<link href="https://github.com/NetEase/pomelo/commits/master.atom" rel="alternate" title="Recent Commits to pomelo:master" type="application/atom+xml">
</link></meta></meta></meta></link></link></meta></meta></meta></meta></meta></meta></meta></meta></meta></meta></link></meta></meta></meta></link></link></link></link></link></link></meta></meta></meta></meta></head><body style="padding:0 25px;"><div class="gollum-markdown-content instapaper_body" id="wiki-body">
<div class="markdown-body">
<p>Let's start our pomelo tour with example "HelloWorld".</p>
<h1>
<a aria-hidden="true" class="anchor" href="#create-a-new-project" id="user-content-create-a-new-project"><span class="octicon octicon-link"></span></a>Create a New Project</h1>
<p>Use pomelo command line tool to create a project quickly, the command is shown as follows:</p>
<pre><code>$ pomelo init ./HelloWorld
</code></pre>
<p>Or you can use the three commands below:</p>
<pre><code>$ mkdir HelloWorld
$ cd HelloWorld
$ pomelo init
</code></pre>
<p>These two ways are equivalent, for more about pomelo command line, please refer to <a href="pomelo-command-line-Usage">pomelo command-line tool</a>. <strong>NOTE</strong>, during initialization of project, users need to select the underlying communication protocol, socket.io or websocket.</p>
<p>Then, go into HelloWorld directory, install its dependencies by:</p>
<pre><code>$ sh npm-install.sh
</code></pre>
<p>if you are a windows user, you should run <code>npm-install.bat</code> instead.</p>
<h1>
<a aria-hidden="true" class="anchor" href="#project-directory-structure" id="user-content-project-directory-structure"><span class="octicon octicon-link"></span></a>Project Directory Structure</h1>
<p>Let's look at the general structure of a pomelo project.</p>
<p>The newly created project structure is shown below:</p>
<p><img alt="Project directory structure" src="src/43d9cf0ad069d06d1be0fc86f93c314c.png"/></p>
<p>By filling the relevant code to corresponding directory, you can develop game server quickly. The following is a brief analysis of each directory and its sub-directory of a pomelo project:</p>
<h4>
<a aria-hidden="true" class="anchor" href="#game-server" id="user-content-game-server"><span class="octicon octicon-link"></span></a>game-server</h4>
<p>Game-server contains the game logic code, using the file app.js as the entrance point to run all the game logics and functionality, and all the game logic , functionalities , configurations, and so on are placed into this directory.</p>
<ul>
<li>app subdirectory</li>
</ul>
<p>All the game logic and functionality related code will be placed here, where users can implement different types of servers, by adding Handlers, Remotes, Components etc. to server.</p>
<ul>
<li>config subdirectory</li>
</ul>
<p>The config subdirectory inside game-server contains all the configuration informations for the game server. All the configuration files are written in JSON format, including logs, master, servers and other server-specific configurations. This directory can contain configuration for the database connection information, map information, numerical tables, etc. as well. In other word, you can place any configurations relavant to the game server here.</p>
<ul>
<li>logs subdirectory</li>
</ul>
<p>This subdirectory contains all the running logs of the game server.As we know, logs can be used to debug the project. Also, logs can be treated as a reference for project maitenance.</p>
<h4>
<a aria-hidden="true" class="anchor" href="#shared" id="user-content-shared"><span class="octicon octicon-link"></span></a>shared</h4>
<p>Shared directory contains some shared code between server-side and client-side. If your client platform is HTML5 or other platform using javascript, then some javascript code implementing utils or algorithms can be used both client and server side, which improves the code reusability.</p>
<h4>
<a aria-hidden="true" class="anchor" href="#web-server" id="user-content-web-server"><span class="octicon octicon-link"></span></a>web-server</h4>
<p>Web server is built based on <a href="http://expressjs.com">express</a> framework, and it provides the static resource service for web client if your client platform is web. Of course, developers can choose other web server like Nginx, Apache instead. If the client platform is not web, such as Android, iOS, then this directory will do nothing. However, in this example, the client platform is web, so the web-server is required.</p>
<h1>
<a aria-hidden="true" class="anchor" href="#start-project" id="user-content-start-project"><span class="octicon octicon-link"></span></a>Start Project</h1>
<p>For this example, because the client platform is web, so you have to start both game-server and web-server.</p>
<p>Start game-server server by:</p>
<pre><code>$ cd game-server
$ pomelo start
</code></pre>
<p>Start web-server server by:</p>
<pre><code>$ cd web-server
$ node app
</code></pre>
<p>There may be port conflict that leads to fail during startup, if so, just modifying the server's port configuration will work. If all the above are ok and log printed shows that the servers are started sucessfully, then we can test our HelloWorld project.</p>
<p>With a browser(chrome recommended) accessing <code>http://localhost:3001</code> or <code>http://127.0.0.1:3001</code>, then click <code>Test Game Server</code>, prompting <em>game server is ok</em> means the servers are running successfully, as shown below:</p>
<p><img alt="test" src="src/f4cac83d509df3ae70e62dd891295357.png"/></p>
<h1>
<a aria-hidden="true" class="anchor" href="#view-server-status-" id="user-content-view-server-status-"><span class="octicon octicon-link"></span></a>View Server Status </h1>
<p>You can use <code>pomelo list</code> to view the status of servers that have been started, as shown below:</p>
<p><img alt="test" src="src/9d88e767231ef59ce96fe3f9f57e5f01.png"/></p>
<p>The status of a server includes:</p>
<ul>
<li>serverId: identify the server, it's configured by user via servers.json.</li>
<li>serverType: serverType, it's configured by user via servers.json too.</li>
<li>pid: process pid of the server.</li>
<li>headUsed: The size of heap the server has been used(MB).</li>
<li>uptime: The running time of the server(minutes).</li>
</ul>
<h1>
<a aria-hidden="true" class="anchor" href="#stop-project" id="user-content-stop-project"><span class="octicon octicon-link"></span></a>Stop Project</h1>
<p>You can stop the project by using the following two ways :</p>
<pre><code>    $ cd game-server
    $ pomelo stop
</code></pre>
<p>or</p>
<pre><code>    $ cd game-server
    $ pomelo kill
</code></pre>
<p>Where the <code>pomelo stop</code> is more elegant, while <code>pomelo kill</code> is relatively crude and low security. it can be used in development environment and if you use <code>pomelo kill</code> in production environment, you have to be very cautious.</p>
<p>Then, stop the web-server, just using <code>Ctrl-C</code> is ok.</p>
<h1>
<a aria-hidden="true" class="anchor" href="#summary" id="user-content-summary"><span class="octicon octicon-link"></span></a>Summary</h1>
<p>Now, we have installed the pomelo and run the HelloWorld example successfully. Next, I suggest you look at a more detailed overview of pomelo. If you can not wait to write code, you can go to pomelo tutorial, where a chat application is illustrated and show you how to use the pomelo to develop a  practical application step by step.</p>
</div>
</div></body></html>